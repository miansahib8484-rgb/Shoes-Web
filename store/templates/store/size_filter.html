{% extends 'store/base.html' %}
{% load static %}

{% block content %}

<section class="products">
  <h2>Shoes in Size {{ size }}</h2>

  
  <div class="product-grid">
    {% if products %}
      {% for product in products %}
        <div class="card">
          {% if product.image %}
            <img src="{{ product.image.url }}" alt="{{ product.name }}">
          {% else %}
            <img src="{% static 'store/images/default-product.jpg' %}" alt="No Image">
          {% endif %}

          <h3>{{ product.name }}</h3>
          <p>Rs {{ product.price }}</p>

          <!-- Sizes inside the card -->
          {% if product.size_list %}
            <div class="product-sizes">
              {% for s in product.size_list %}
                <span class="size-badge">{{ s }}</span>
              {% endfor %}
            </div>
          {% else %}
            <p class="no-size">Size Not Available</p>
          {% endif %}

          <!-- Add to Cart Button -->
          <a href="{% url 'product_detail' product.pk %}" class="add-cart-btn">
            Add to Cart
          </a>
        </div>
      {% endfor %}
    {% else %}
      <p>No products found for size {{ size }}.</p>
    {% endif %}
  </div>
</section>

<section class="shop-by-size">
  <h2>Shop by Size</h2>
  <div class="size-boxes">
    {% if sizes %}
      {% for s in sizes %}
        {% if category %}
          <a href="{% url 'filter_by_category_size' category=category size=s %}" class="size">{{ s }}</a>
        {% else %}
          <a href="{% url 'filter_by_size' size=s %}" class="size">{{ s }}</a>
        {% endif %}
      {% endfor %}
    {% else %}
      <p>No sizes available at the moment.</p>
    {% endif %}
  </div>
</section>

{% endblock %}
